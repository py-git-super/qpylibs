### poc对讲机

**类引用：**

```python
from usr.poc_module import Poc
```

 

**实例化参数：**

| 参数    | 类型     | 说明                                                         |
| ------- | -------- | ------------------------------------------------------------ |
| init_cb | 回调函数 | 初始化回调函数<br />0：初始化失败<br />1：初始化成功<br />不传入则默认空回调函数 |

**接口函数：**

> **log_en(enable)**

log使能

- 参数

| 参数   | 必填 | 类型 | 说明                                            |
| ------ | ---- | ---- | ----------------------------------------------- |
| enable | 否   | int  | log 使能，默认0<br />0：关闭log<br />1：打开log |

* 返回值

无

> ​	**login(login_cb)**

登录

- 参数

| 参数     | 必填 | 类型     | 说明                                                         |
| -------- | ---- | -------- | ------------------------------------------------------------ |
| login_cb | 是   | 回调函数 | 登录状态回调函数<br />1：登录成功（可能会多次返回失败后，登录成功）<br />2：登录失败 |

* 返回值

0：成功

-1：失败（以登录状态回调为主）



> ​	logout()**

登出

- 参数

  无

* 返回值

  无

  

> ​	**joingroup(gid)**

设备入组

- 参数

| 参数 | 必填 | 类型 | 说明 |
| ---- | ---- | ---- | ---- |
| gid  | 是   | int  | 组id |

* 返回值

  0：成功

  其它：失败

  

> ​	**leavegroup()**

设备离开当前组

- 参数

  无

* 返回值

  0：成功

  其它：失败



> ​	**speak(value)**

呼叫组内用户

- 参数

| 参数  | 必填 | 类型 | 说明                     |
| ----- | ---- | ---- | ------------------------ |
| value | 是   | int  | 1：呼叫<br />0：退出呼叫 |

* 返回值

  0：成功

  其它：失败



> ​	**calluser(uid,cb)**

呼叫指定用户

- 参数

| 参数 | 必填 | 类型 | 说明                               |
| ---- | ---- | ---- | ---------------------------------- |
| uid  | 是   | int  | 对方用户id                         |
| cb   | 是   | fun  | 单呼回调<br />1：成功<br />0；失败 |

* 返回值

  0：成功

  其它：失败



> ​	**get_loginstate()**

查询当前用户在线状态

- 参数

  无

* 返回值

1，在线 	2，离线	3，在线在组



> ​	**get_groupcount()**

获取群组数

- 参数

  无

* 返回值

群组个数



> ​	**get_grouplist(index_begin, count)**

查询群组信息

- 参数

| 参数        | 必填 | 类型 | 说明             |
| ----------- | ---- | ---- | ---------------- |
| index_begin | 是   | int  | 查询的索引起始值 |
| count       | 是   | int  | 计划查询的个数   |

* 返回值

  -1：失败

  元组：成功

  （群组id,群组名，群组类型，群组索引号）



> ​	**get_audiostate()**

获取当前音频状态

- 参数

  无

* 返回值

0：空闲

1：开始通话

2：通话中

3：停止通话

4：开始接听

5：接听中

6：停止接听

7：开始播放tts

8：停止播放tts

9：开始播放提示音

10：停止播放提示音

11：开始录音

12：结束录音



> ​	**set_tts_enable(enable)**

使能tts

- 参数

| 参数   | 必填 | 类型 | 说明                                |
| ------ | ---- | ---- | ----------------------------------- |
| enable | 是   | int  | 使能tts<br />1：使用<br />0：不使用 |

* 返回值

  0：成功

  其它：失败



> ​	**play_tts(tts_str,interrupt)**

播放tts

- 参数

| 参数      | 必填 | 类型 | 说明       |
| --------- | ---- | ---- | ---------- |
| tts_str   | 是   | str  | 播放的内容 |
| interrupt | 是   | int  | 可否中断   |

* 返回值

  0：成功

  其它：失败



> ​	**ping()**

ping服务器

- 参数

  无

* 返回值

  0：成功

  其它：失败



> ​	**register_audio_cb(audio_cb)**

注册音频回调

- 参数

| 参数     | 必填 | 类型 | 说明     |
| -------- | ---- | ---- | -------- |
| audio_cb | 是   | fun  | 音频回调 |

* 返回值

  无

  注：回调参数说明

  列表（state，uid, name，flag）

  state:当前语音状态:收听/讲话/TTS/TONE
  uid：当前操作用户uid，讲话/TTS/TONE时为0
  name:当前操作用户名字，讲话/TTS/TONE时为NULL
  flag:如果state为BND_LISTEN_START,flag==1表示本机可以打断对方讲话,flag==0表示本机不能打断对方讲话



> ​	**register_join_group_cb(cb)**

注册入组回调

- 参数

| 参数 | 类型 | 说明                                  |
| ---- | ---- | ------------------------------------- |
| cb   | fun  | 进组回调,触发源包括主动进组和被动进组 |

* 返回值

  无

  注：回调参数说明

  列表（groupname，gid）

  groupname:当前群组的名字
  gid：当前群组gid



> ​	**register_listupdate_cb(cb)**

注册数据变化的回调

- 参数

| 参数 | 类型 | 说明           |
| ---- | ---- | -------------- |
| cb   | fun  | 数据变化的回调 |

* 返回值

  无

  注：回调参数说明

  1：群组列表变化， 2：成员列表变化



> ​	**register_upgrade_cb(cb)**

注册是否升级回调

- 参数

| 参数 | 类型 | 说明     |
| ---- | ---- | -------- |
| cb   | fun  | 升级回调 |

* 返回值

  无

  注：回调参数说明

  1：需要升级， 0：不需要升级



> ​	**set_notify_mode(flags)**

设置通知模式

- 参数

| 参数  | 类型 | 说明     |
| ----- | ---- | -------- |
| flags | int  | 通知模式 |

* 返回值

无



> ​	**get_init_status()**

设置通知模式

- 参数

* 返回值

  无